language: node_js
sudo: false
node_js:
  - '4.2'
branches:
  except:
    - gh-pages
cache:
  bundler: true
  directories:
    - node_modules
    - /home/travis/.rvm
install:
  - npm i pm2 http-server contentascode/broken-link-checker -g
  - "rvm install $(sed 's/ruby-//g' .ruby-version)"
  - bundle install
deploy:
  skip_cleanup: true
  provider: script
  script: npm run deploy
env:
  global:
    - GH_USERNAME=jmatsushita
    - CONFIG_OWNER=iilab
    - CONFIG_REPO=contentascode
    - secure: >
        "NyR1V8qxUUyK1gvZK3KDO3tlwycaM1+2Pg3mIe/hk1ESOFlsn0FQvv8Rrp1qJ/RQ1aqVy/Pdz8tt2uIxEetNg6yH9Ho+iCFZLIEIUDU8VT8+pJzYXwmpiuNNZ336JAD6nJYczVESZsiMooVbGwla45d/3ghQuCSuCUU4oc/I00xKZt5iwlpACCsAvzP/a9gsuppWSO8ZRL4nsbHOZylF/4uVbykZxMFBHN/GUJdlGvA0d+dm5lRUrppGTEJC50RPj3gDdLd8C5UlZ7MkMdhTrRgfZJi1eTpbm9vejA5Bu2RT3B9oeb3AyV9sirxlJ6VykG8GenUhFQlzPghj33k+mXt2SKXZIB67/cR96jDavhu3yoOt835fhaKbWpDpqRraPS+VL7IdVxJ9RA/IyJPQIK1z7/s1xx+pPy5mRQSooqlKxSsVRIFFjjwJbJKiZic8NxCjfAFdyeypNoo3Ew1t0hdkT2aBGqx2QlHk1ikhFGZyVjYeWpDtVIDElVVxvqUIResKOQ7egtY2KhsIw5rU9RLp0XCfY+zFZ0bPJqKXozT8kupt1p1j3Kg/YbkDvU1e6dGcrVsETV8K9mkGKyIXuysuxXZqLjIuQ6Wt5hNF4nJiA6B3R0+1XZ4+Ix6vnWo5dwJh70alpD286mOGJpyj7rEcTtiAhnS4Dfn5QUq3ROc="
